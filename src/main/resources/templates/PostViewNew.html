<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title th:text="#{page.title.post-view}">Forum Management System</title>
    <th:block th:replace="~{fragments/head :: head}"></th:block>
    <link href="../static/styles/style.css" th:href="@{/styles/style.css}" rel="stylesheet">
</head>

<body class="user-view d-flex flex-column min-vh-100">
<header th:replace="~{fragments/navbar :: header(context='post-details')}"></header>
<div class="container mt-5">
    <article class="blog-post">
        <h2 class="blog-post-title" th:text="${post.getTitle()}">Sample post title</h2>
        <p class="blog-post-meta">
            <span th:text="${post.getDateCreated().format(formatter)} + ' by '">Date Created</span>
            <span><a href="#" th:href="@{/users/{id}(id=${post.getUserCreated().getId()})}"
                     th:text="${post.getUserCreated().getUsername()}">&nbsp&nbsp</a></span>
            <span>
                <a class="btn btn-warning text-dark btn-sm" href="#"
                   th:href="@{${requestURI} + '/update'}" th:if="${session.user == post.getUserCreated() || session.isAdmin}"
                   th:text="#{post-form.update}">Update Post</a></span>
            <span>
                <a data-bs-toggle="modal" data-bs-target="#deleteModal" class="btn btn-danger text-light btn-sm" href="#">Delete Post</a></span>
        </p>
        <p th:text="${post.getContent()}">This blog post shows a few different types of content.</p>
        <section>
            <a class="btn" th:classappend="${session.isAuthenticated && post.getLikes().contains(session.user)} ? 'btn-danger bi bi-heart' : 'btn-light bi bi-heart'"
               th:href="@{/posts/{id}/like(id=${post.getId()})}">
            </a>
            <a class="btn" th:classappend="${session.isAuthenticated} ? 'btn-primary bi bi-reply-fill'"
               th:href="@{/posts/{id}/reply(id=${post.getId()})}">
            </a>
        </section>
        <hr>
    </article>
</div>

<!-- Delete Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete post?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <a href="#" th:href="@{${requestURI} + '/delete'}" class="btn btn-danger">Delete</a>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
<script th:replace="~{fragments/scripts :: bootstrap}"></script>
</body>
</html>