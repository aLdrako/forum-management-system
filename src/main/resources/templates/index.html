<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title th:text="#{page.title.home}">Forum Management System</title>
    <th:block th:replace="~{fragments/head :: head}"></th:block>
</head>

<body class="main-view d-flex flex-column min-vh-100">
<header th:replace="~{fragments/navbar :: header(context='home')}"></header>
<main class="container mx-auto my-5">
    <div class="p-4 p-md-5 mb-4 rounded text-bg-dark">
        <div class="col px-0">
            <h1 class="display-4 fst-italic">Welcome to Java Fundamentals Forum</h1>
            <p class="lead mt-3">
                Our forum is a community of Java programmers from all levels of experience who come together to share knowledge, discuss the latest trends, and help each other improve their programming skills. <br><br>
                So join us today and be a part of our Java programming community!
            </p>
        </div>
    </div>

    <div class="row g-5">
        <div class="col-md-6">
            <h6 class="display-6">Most Recent</h6>
            <hr class="pb-3">
            <div class="card">
                <div class="card-body" th:each="post : ${mostRecentPosts}"
                     th:with="isDeleted=${post.getUserCreated().getUsername().contains('deleted_')}">
                    <h5 class="card-title"><a href="#" th:unless="${session.isAuthenticated}" th:href="@{/auth/login}" class="text-decoration-none" th:text="${post.getTitle()}">Post title</a></h5>
                    <h5 class="card-title"><a href="#" th:if="${session.isAuthenticated}" th:href="@{/posts/{id}(id=${post.getId()})}" class="text-decoration-none" th:text="${post.getTitle()}">Post title</a></h5>
                    <h6 th:if="${!isDeleted}" class="card-subtitle mb-2 text-muted" th:text="${post.getUserCreated().getUsername()}">Author</h6>
                    <h6 th:if="${isDeleted}" class="card-subtitle mb-2 text-muted" th:text="anonymous">Author</h6>
                    <p class="card-text text-truncate" th:text="${post.getContent()}">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <h6 class="display-6">Most Commented</h6>
            <hr class="pb-3">
            <div class="card">
                <div class="card-body" th:each="post : ${mostCommentedPosts}">
                    <h5 class="card-title"><a href="#" th:unless="${session.isAuthenticated}" th:href="@{/auth/login}" class="text-decoration-none" th:text="${post.getTitle()}">Post title</a></h5>
                    <h5 class="card-title"><a href="#" th:if="${session.isAuthenticated}" th:href="@{/posts/{id}(id=${post.getId()})}" class="text-decoration-none" th:text="${post.getTitle()}">Post title</a></h5>
                    <h6 class="card-subtitle mb-2 text-muted" th:text="${post.getUserCreated().getUsername()}">Author</h6>
                    <p class="card-text text-truncate" th:text="${post.getContent()}">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                </div>
            </div>
        </div>
    </div>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>
<script th:replace="~{fragments/scripts :: bootstrap}"></script>
</body>
</html>